/*
 * popcorn.js version 1.3
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */
(function(){document.addEventListener=document.addEventListener||function(t,e){t="DOMContentLoaded"===t?"onreadystatechange":"on"+t,document.attachEvent(t,e)},document.removeEventListener=document.removeEventListener||function(t,e){t="DOMContentLoaded"===t?"onreadystatechange":"on"+t,document.detachEvent(t,e)},HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(t,e){t="load"===t?"onreadystatechange":"on"+t,this.attachEvent(t,e)},HTMLScriptElement.prototype.removeEventListener=HTMLScriptElement.prototype.removeEventListener||function(t,e){t="load"===t?"onreadystatechange":"on"+t,this.detachEvent(t,e)},document.createEvent=document.createEvent||function(){return{type:null,target:null,currentTarget:null,cancelable:!1,bubbles:!1,initEvent:function(t){this.type=t},stopPropagation:function(){},stopImmediatePropagation:function(){}}},Array.prototype.forEach=Array.prototype.forEach||function(t,e){var n=Object.prototype.hasOwnProperty;if(!this||!t)return{};e=e||this;for(var a in this)n.call(this,a)&&t.call(e,this[a],a,this);return this},Array.prototype.map||(Array.prototype.map=function(t,e){var n,a,r;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),o=i.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),a=Array(o),r=0;o>r;){var s;r in i&&(s=i[r],s=t.call(n,s,r,i),a[r]=s),r++}return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var a=0;if(arguments.length>0&&(a=Number(arguments[1]),a!=a?a=0:0!=a&&1/0!=a&&a!=-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=n)return-1;for(a=a>=0?a:Math.max(n-Math.abs(a),0);n>a;a++)if(a in e&&e[a]===t)return a;return-1})})(),function(t,e){function n(t,e){return function(){if(v.plugin.debug)return t.apply(this,arguments);try{return t.apply(this,arguments)}catch(n){v.plugin.errors.push({plugin:e,thrown:n,source:t.toString()}),this.emit("pluginerror",v.plugin.errors)}}}if(e.addEventListener){var a=Array.prototype,r=Object.prototype,i=a.forEach,o=a.slice,s=r.hasOwnProperty,d=r.toString,u=t.Popcorn,c=[],l=!1,p={events:{hash:{},apis:{}}},f=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,16)}}(),v=function(t,e){return new v.p.init(t,e||null)};v.version="1.3",v.isSupported=!0,v.instances=[],v.p=v.prototype={init:function(t,n){var a,r=this;if("function"!=typeof t){if("string"==typeof t)try{a=e.querySelector(t)}catch(i){throw Error("Popcorn.js Error: Invalid media element selector: "+t)}if(this.media=a||t,a=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[a]=this.media,this.options=n||{},this.id=this.options.id||v.guid(a),v.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:v.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}},v.instances.push(this);var o=function(){0>r.media.currentTime&&(r.media.currentTime=0),r.media.removeEventListener("loadeddata",o,!1);var t,e,n,a,i;t=r.media.duration,t=t!=t?Number.MAX_VALUE:t+1,v.addTrackEvent(r,{start:t,end:t}),r.options.frameAnimation?(r.data.timeUpdate=function(){v.timeUpdate(r,{}),v.forEach(v.manifest,function(t,o){if(e=r.data.running[o]){a=e.length;for(var s=0;a>s;s++)n=e[s],(i=n._natives)&&i.frame&&i.frame.call(r,{},n,r.currentTime())}}),r.emit("timeupdate"),!r.isDestroyed&&f(r.data.timeUpdate)},!r.isDestroyed&&f(r.data.timeUpdate)):(r.data.timeUpdate=function(t){v.timeUpdate(r,t)},r.isDestroyed||r.media.addEventListener("timeupdate",r.data.timeUpdate,!1))};return Object.defineProperty(this,"error",{get:function(){return r.media.error}}),r.media.readyState>=2?o():r.media.addEventListener("loadeddata",o,!1),this}if("complete"===e.readyState)t(e,v);else if(c.push(t),!l){l=!0;var s=function(){e.removeEventListener("DOMContentLoaded",s,!1);for(var t=0,n=c.length;n>t;t++)c[t].call(e,v);c=null};e.addEventListener("DOMContentLoaded",s,!1)}}},v.p.init.prototype=v.p,v.byId=function(t){for(var e=v.instances,n=e.length,a=0;n>a;a++)if(e[a].id===t)return e[a];return null},v.forEach=function(t,e,n){if(!t||!e)return{};n=n||this;var a,r;if(i&&t.forEach===i)return t.forEach(e,n);if("[object NodeList]"===d.call(t)){for(a=0,r=t.length;r>a;a++)e.call(n,t[a],a,t);return t}for(a in t)s.call(t,a)&&e.call(n,t[a],a,t);return t},v.extend=function(t){var e=o.call(arguments,1);return v.forEach(e,function(e){for(var n in e)t[n]=e[n]}),t},v.extend(v,{noConflict:function(e){return e&&(t.Popcorn=u),v},error:function(t){throw Error(t)},guid:function(t){return v.guid.counter++,(t?t:"")+(+new Date+v.guid.counter)},sizeOf:function(t){var e,n=0;for(e in t)n++;return n},isArray:Array.isArray||function(t){return"[object Array]"===d.call(t)},nop:function(){},position:function(n){n=n.getBoundingClientRect();var a,r,i,o={},s=e.documentElement,d=e.body;a=s.clientTop||d.clientTop||0,r=s.clientLeft||d.clientLeft||0,i=t.pageYOffset&&s.scrollTop||d.scrollTop,s=t.pageXOffset&&s.scrollLeft||d.scrollLeft,a=Math.ceil(n.top+i-a),r=Math.ceil(n.left+s-r);for(var u in n)o[u]=Math.round(n[u]);return v.extend({},o,{top:a,left:r})},disable:function(t,e){if(!t.data.disabled[e]){t.data.disabled[e]=!0;for(var n,a=t.data.running[e].length-1;a>=0;a--)n=t.data.running[e][a],n._natives.end.call(t,null,n)}return t},enable:function(t,e){if(t.data.disabled[e]){t.data.disabled[e]=!1;for(var n,a=t.data.running[e].length-1;a>=0;a--)n=t.data.running[e][a],n._natives.start.call(t,null,n)}return t},destroy:function(t){var e,n,a,r,i=t.data.events,o=t.data.trackEvents;for(n in i){e=i[n];for(a in e)delete e[a];i[n]=null}for(r in v.registryByName)v.removePlugin(t,r);o.byStart.length=0,o.byEnd.length=0,t.isDestroyed||(t.data.timeUpdate&&t.media.removeEventListener("timeupdate",t.data.timeUpdate,!1),t.isDestroyed=!0)}}),v.guid.counter=1,v.extend(v.p,function(){var t={};return v.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(e){t[e]=function(t){var n;return"function"==typeof this.media[e]?(null!=t&&/play|pause/.test(e)&&(this.media.currentTime=v.util.toSeconds(t)),this.media[e](),this):null!=t?(n=this.media[e],this.media[e]=t,n!==t&&this.emit("attrchange",{attribute:e,previousValue:n,currentValue:t}),this):this.media[e]}}),t}()),v.forEach("enable disable".split(" "),function(t){v.p[t]=function(e){return v[t](this,e)}}),v.extend(v.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(t,e,n){var a,r,i=arguments.length;try{r=v.util.toSeconds(t)}catch(o){}if("number"==typeof r&&(t=r),"number"==typeof t&&2===i)n=e,e=t,t=v.guid("cue");else if(1===i)e=-1;else if(a=this.getTrackEvent(t))"string"==typeof t&&2===i&&("number"==typeof e&&(n=a._natives.start),"function"==typeof e&&(n=e,e=a.start));else if(i>=2){if("string"==typeof e){try{r=v.util.toSeconds(e)}catch(s){}e=r}"number"==typeof e&&(n=v.nop()),"function"==typeof e&&(n=e,e=-1)}return v.addTrackEvent(this,{id:t,start:e,end:e+1,_running:!1,_natives:{start:n||v.nop,end:v.nop,type:"cue"}}),this},mute:function(t){return t=null==t||t===!0?"muted":"unmuted","unmuted"===t&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"===t&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(t),this},unmute:function(t){return this.mute(null==t?!1:!t)},position:function(){return v.position(this.media)},toggle:function(t){return v[this.data.disabled[t]?"enable":"disable"](this,t)},defaults:function(t,e){return v.isArray(t)?(v.forEach(t,function(t){for(var e in t)this.defaults(e,t[e])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[t]||(this.options.defaults[t]={}),v.extend(this.options.defaults[t],e),this)}}),v.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},v.Events.Natives=v.Events.UIEvents+" "+v.Events.MouseEvents+" "+v.Events.Events,p.events.apiTypes=["UIEvents","MouseEvents","Events"],function(t,e){for(var n=p.events.apiTypes,a=t.Natives.split(/\s+/g),r=0,i=a.length;i>r;r++)e.hash[a[r]]=!0;n.forEach(function(n){e.apis[n]={};for(var a=t[n].split(/\s+/g),r=a.length,i=0;r>i;i++)e.apis[n][a[i]]=!0})}(v.Events,p.events),v.events={isNative:function(t){return!!p.events.hash[t]},getInterface:function(t){if(!v.events.isNative(t))return!1;var e=p.events,n=e.apiTypes;e=e.apis;for(var a,r,i=0,o=n.length;o>i;i++)if(r=n[i],e[r][t]){a=r;break}return a},all:v.Events.Natives.split(/\s+/g),fn:{trigger:function(n,a){var r;if(this.data.events[n]&&v.sizeOf(this.data.events[n])){if(r=v.events.getInterface(n))return r=e.createEvent(r),r.initEvent(n,!0,!0,t,1),this.media.dispatchEvent(r),this;v.forEach(this.data.events[n],function(t){t.call(this,a)},this)}return this},listen:function(t,e){var n,a=this,r=!0,i=v.events.hooks[t];return this.data.events[t]||(this.data.events[t]={},r=!1),i&&(i.add&&i.add.call(this,{},e),i.bind&&(t=i.bind),i.handler&&(n=e,e=function(t){i.handler.call(a,t,n)}),r=!0,this.data.events[t]||(this.data.events[t]={},r=!1)),this.data.events[t][e.name||e.toString()+v.guid()]=e,!r&&v.events.all.indexOf(t)>-1&&this.media.addEventListener(t,function(e){v.forEach(a.data.events[t],function(t){"function"==typeof t&&t.call(a,e)})},!1),this},unlisten:function(t,e){return this.data.events[t]&&this.data.events[t][e]?(delete this.data.events[t][e],this):(this.data.events[t]=null,this)}},hooks:{canplayall:{bind:"canplaythrough",add:function(t,e){var n=!1;this.media.readyState&&(e.call(this,t),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(t,e){this.data.hooks.canplayall.fired||(e.call(this,t),this.data.hooks.canplayall.fired=!0)}}}},v.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(t){v.p[t[0]]=v.p[t[1]]=v.events.fn[t[0]]}),v.addTrackEvent=function(t,e){var n,a;e.id&&(n=t.getTrackEvent(e.id)),n&&(a=!0,e=v.extend({},n,e),t.removeTrackEvent(e.id)),e&&e._natives&&e._natives.type&&t.options.defaults&&t.options.defaults[e._natives.type]&&(e=v.extend({},t.options.defaults[e._natives.type],e)),e._natives&&(e._id=e.id||e._id||v.guid(e._natives.type),t.data.history.push(e._id)),e.start=v.util.toSeconds(e.start,t.options.framerate),e.end=v.util.toSeconds(e.end,t.options.framerate);var r,i=t.data.trackEvents.byStart,o=t.data.trackEvents.byEnd;for(r=i.length-1;r>=0;r--)if(e.start>=i[r].start){i.splice(r+1,0,e);break}for(i=o.length-1;i>=0;i--)if(e.end>o[i].end){o.splice(i+1,0,e);break}e.end>t.media.currentTime&&e.start<=t.media.currentTime&&(e._running=!0,t.data.running[e._natives.type].push(e),t.data.disabled[e._natives.type]||e._natives.start.call(t,null,e)),t.data.trackEvents.startIndex>=r&&e.start<=t.data.trackEvents.previousUpdateTime&&t.data.trackEvents.startIndex++,t.data.trackEvents.endIndex>=i&&e.end<t.data.trackEvents.previousUpdateTime&&t.data.trackEvents.endIndex++,this.timeUpdate(t,null,!0),e._id&&v.addTrackEvent.ref(t,e),a&&(a="cue"===e._natives.type?"cuechange":"trackchange",t.emit(a,{id:e.id,previousValue:{time:n.start,fn:n._natives.start},currentValue:{time:e.start,fn:e._natives.start}}))},v.addTrackEvent.ref=function(t,e){return t.data.trackRefs[e._id]=e,t},v.removeTrackEvent=function(t,e){for(var n,a,r=t.data.history.length,i=t.data.trackEvents.byStart.length,o=0,s=0,d=[],u=[],c=[],l=[];--i>-1;)n=t.data.trackEvents.byStart[o],a=t.data.trackEvents.byEnd[o],n._id||(d.push(n),u.push(a)),n._id&&(n._id!==e&&d.push(n),a._id!==e&&u.push(a),n._id===e&&(s=o,n._natives._teardown&&n._natives._teardown.call(t,n))),o++;if(i=t.data.trackEvents.animating.length,o=0,i)for(;--i>-1;)n=t.data.trackEvents.animating[o],n._id||c.push(n),n._id&&n._id!==e&&c.push(n),o++;for(t.data.trackEvents.startIndex>=s&&t.data.trackEvents.startIndex--,t.data.trackEvents.endIndex>=s&&t.data.trackEvents.endIndex--,t.data.trackEvents.byStart=d,t.data.trackEvents.byEnd=u,t.data.trackEvents.animating=c,i=0;r>i;i++)t.data.history[i]!==e&&l.push(t.data.history[i]);t.data.history=l,v.removeTrackEvent.ref(t,e)},v.removeTrackEvent.ref=function(t,e){return delete t.data.trackRefs[e],t},v.getTrackEvents=function(t){var e=[];t=t.data.trackEvents.byStart;for(var n,a=t.length,r=0;a>r;r++)n=t[r],n._id&&e.push(n);return e},v.getTrackEvents.ref=function(t){return t.data.trackRefs},v.getTrackEvent=function(t,e){return t.data.trackRefs[e]},v.getTrackEvent.ref=function(t,e){return t.data.trackRefs[e]},v.getLastTrackEventId=function(t){return t.data.history[t.data.history.length-1]},v.timeUpdate=function(t,e){var n,a,r,i=t.media.currentTime,o=t.data.trackEvents.previousUpdateTime,s=t.data.trackEvents,d=s.endIndex,u=s.startIndex,c=s.byStart.length,l=s.byEnd.length,p=v.registryByName;if(i>=o){for(;s.byEnd[d]&&i>=s.byEnd[d].end;){if(n=s.byEnd[d],a=(o=n._natives)&&o.type,o&&!p[a]&&!t[a])return v.removeTrackEvent(t,n._id),void 0;n._running===!0&&(n._running=!1,r=t.data.running[a],r.splice(r.indexOf(n),1),t.data.disabled[a]||(o.end.call(t,e,n),t.emit("trackend",v.extend({},n,{plugin:a,type:"trackend"})))),d++}for(;s.byStart[u]&&i>=s.byStart[u].start;){if(n=s.byStart[u],a=(o=n._natives)&&o.type,o&&!p[a]&&!t[a])return v.removeTrackEvent(t,n._id),void 0;n.end>i&&n._running===!1&&(n._running=!0,t.data.running[a].push(n),t.data.disabled[a]||(o.start.call(t,e,n),t.emit("trackstart",v.extend({},n,{plugin:a,type:"trackstart"})))),u++}}else if(o>i){for(;s.byStart[u]&&s.byStart[u].start>i;){if(n=s.byStart[u],a=(o=n._natives)&&o.type,o&&!p[a]&&!t[a])return v.removeTrackEvent(t,n._id),void 0;n._running===!0&&(n._running=!1,r=t.data.running[a],r.splice(r.indexOf(n),1),t.data.disabled[a]||(o.end.call(t,e,n),t.emit("trackend",v.extend({},n,{plugin:a,type:"trackend"})))),u--}for(;s.byEnd[d]&&s.byEnd[d].end>i;){if(n=s.byEnd[d],a=(o=n._natives)&&o.type,o&&!p[a]&&!t[a])return v.removeTrackEvent(t,n._id),void 0;i>=n.start&&n._running===!1&&(n._running=!0,t.data.running[a].push(n),t.data.disabled[a]||(o.start.call(t,e,n),t.emit("trackstart",v.extend({},n,{plugin:a,type:"trackstart"})))),d--}}s.endIndex=d,s.startIndex=u,s.previousUpdateTime=i,c>s.byStart.length&&s.startIndex--,l>s.byEnd.length&&s.endIndex--},v.extend(v.p,{getTrackEvents:function(){return v.getTrackEvents.call(null,this)},getTrackEvent:function(t){return v.getTrackEvent.call(null,this,t)},getLastTrackEventId:function(){return v.getLastTrackEventId.call(null,this)},removeTrackEvent:function(t){return v.removeTrackEvent.call(null,this,t),this},removePlugin:function(t){return v.removePlugin.call(null,this,t),this},timeUpdate:function(t){return v.timeUpdate.call(null,this,t),this},destroy:function(){return v.destroy.call(null,this),this}}),v.manifest={},v.registry=[],v.registryByName={},v.plugin=function(t,e,a){if(!(v.protect.natives.indexOf(t.toLowerCase())>=0)){var r=["start","end"],i={},d="function"==typeof e,u=["_setup","_teardown","start","end","frame"],c=function(t,e){return t=t||v.nop,e=e||v.nop,function(){t.apply(this,arguments),e.apply(this,arguments)}};v.manifest[t]=a=a||e.manifest||{},u.forEach(function(a){e[a]=n(e[a]||v.nop,t)});var l=function(e,n){if(!n)return this;if(n.ranges&&v.isArray(n.ranges))return v.forEach(n.ranges,function(e){e=v.extend({},n,e),delete e.ranges,this[t](e)},this),this;var i,d=n._natives={},l="";return v.extend(d,e),n._natives.type=t,n._running=!1,d.start=d.start||d["in"],d.end=d.end||d.out,n.once&&(d.end=c(d.end,function(){this.removeTrackEvent(n._id)})),d._teardown=c(function(){var t=o.call(arguments),e=this.data.running[d.type];t.unshift(null),t[1]._running&&e.splice(e.indexOf(n),1)&&d.end.apply(this,t)},d._teardown),n.compose=n.compose&&n.compose.split(" ")||[],n.effect=n.effect&&n.effect.split(" ")||[],n.compose=n.compose.concat(n.effect),n.compose.forEach(function(t){l=v.compositions[t]||{},u.forEach(function(t){d[t]=c(d[t],l[t])})}),n._natives.manifest=a,"start"in n||(n.start=n["in"]||0),n.end||0===n.end||(n.end=n.out||Number.MAX_VALUE),s.call(n,"toString")||(n.toString=function(){var e=["start: "+n.start,"end: "+n.end,"id: "+(n.id||n._id)];return null!=n.target&&e.push("target: "+n.target),t+" ( "+e.join(", ")+" )"}),n.target||(i="options"in a&&a.options,n.target=i&&"target"in i&&i.target),n._natives&&(n._id=v.guid(n._natives.type)),n._natives._setup&&n._natives._setup.call(this,n),v.addTrackEvent(this,n),v.forEach(e,function(t,e){"type"!==e&&-1===r.indexOf(e)&&this.on(e,t)},this),this};v.p[t]=i[t]=function(n,a){var r;if(n&&!a)a=n;else{if(r=this.getTrackEvent(n))return a=v.extend({},r,a),v.addTrackEvent(this,a),this;a.id=n}return this.data.running[t]=this.data.running[t]||[],r=v.extend({},this.options.defaults&&this.options.defaults[t]||{},a),l.call(this,d?e.call(this,r):e,r)},a&&v.extend(e,{manifest:a});var p={fn:i[t],definition:e,base:e,parents:[],name:t};return v.registry.push(v.extend(i,p,{type:t})),v.registryByName[t]=p,i}v.error("'"+t+"' is a protected function name")},v.plugin.errors=[],v.plugin.debug="1.3"===v.version,v.removePlugin=function(t,e){if(!e){if(e=t,t=v.p,v.protect.natives.indexOf(e.toLowerCase())>=0)return v.error("'"+e+"' is a protected function name"),void 0;var n,a=v.registry.length;for(n=0;a>n;n++)if(v.registry[n].name===e)return v.registry.splice(n,1),delete v.registryByName[e],delete v.manifest[e],delete t[e],void 0}a=t.data.trackEvents.byStart,n=t.data.trackEvents.byEnd;var r,i,o=t.data.trackEvents.animating;for(r=0,i=a.length;i>r;r++)a[r]&&a[r]._natives&&a[r]._natives.type===e&&(a[r]._natives._teardown&&a[r]._natives._teardown.call(t,a[r]),a.splice(r,1),r--,i--,r>=t.data.trackEvents.startIndex&&(t.data.trackEvents.startIndex--,t.data.trackEvents.endIndex--)),n[r]&&n[r]._natives&&n[r]._natives.type===e&&n.splice(r,1);for(r=0,i=o.length;i>r;r++)o[r]&&o[r]._natives&&o[r]._natives.type===e&&(o.splice(r,1),r--,i--)},v.compositions={},v.compose=function(t,e,n){v.manifest[t]=n||e.manifest||{},v.compositions[t]=e},v.plugin.effect=v.effect=v.compose;var h=/^(?:\.|#|\[)/;v.dom={debug:!1,find:function(t,n){var a=null;if(t=t.trim(),n=n||e,t){if(!h.test(t)&&(a=e.getElementById(t),null!==a))return a;try{a=n.querySelector(t)}catch(r){if(v.dom.debug)throw Error(r)}}return a}};var y=/\?/,m={url:"",data:"",dataType:"",success:v.nop,type:"GET",async:!0,xhr:function(){return new t.XMLHttpRequest}};v.xhr=function(t){if(t.dataType=t.dataType&&t.dataType.toLowerCase()||null,!t.dataType||"jsonp"!==t.dataType&&"script"!==t.dataType){if(t=v.extend({},m,t),t.ajax=t.xhr(),t.ajax)return"GET"===t.type&&t.data&&(t.url+=(y.test(t.url)?"&":"?")+t.data,t.data=null),t.ajax.open(t.type,t.url,t.async),t.ajax.send(t.data||null),v.xhr.httpData(t)}else v.xhr.getJSONP(t.url,t.success,"script"===t.dataType)},v.xhr.httpData=function(t){var e,n,a=null,r=null;return t.ajax.onreadystatechange=function(){if(4===t.ajax.readyState){try{a=JSON.parse(t.ajax.responseText)}catch(i){}if(e={xml:t.ajax.responseXML,text:t.ajax.responseText,json:a},!e.xml||!e.xml.documentElement){e.xml=null;try{n=new DOMParser,r=n.parseFromString(t.ajax.responseText,"text/xml"),r.getElementsByTagName("parsererror").length||(e.xml=r)}catch(o){}}t.dataType&&(e=e[t.dataType]),t.success.call(t.ajax,e)}},e},v.xhr.getJSONP=function(t,n,a){var r=e.head||e.getElementsByTagName("head")[0]||e.documentElement,i=e.createElement("script"),o=!1,s=[];s=/(=)\?(?=&|$)|\?\?/;var d,u;a||(u=t.match(/(callback=[^&]*)/),null!==u&&u.length?(s=u[1].split("=")[1],"?"===s&&(s="jsonp"),d=v.guid(s),t=t.replace(/(callback=[^&]*)/,"callback="+d)):(d=v.guid("jsonp"),s.test(t)&&(t=t.replace(s,"$1"+d)),s=t.split(/\?(.+)?/),t=s[0]+"?",s[1]&&(t+=s[1]+"&"),t+="callback="+d),window[d]=function(t){n&&n(t),o=!0}),i.addEventListener("load",function(){a&&n&&n(),o&&delete window[d],r.removeChild(i)},!1),i.src=t,r.insertBefore(i,r.firstChild)},v.getJSONP=v.xhr.getJSONP,v.getScript=v.xhr.getScript=function(t,e){return v.xhr.getJSONP(t,e,!0)},v.util={toSeconds:function(t,e){var n,a,r,i=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/;return"number"==typeof t?t:("string"==typeof t&&!i.test(t)&&v.error("Invalid time format"),i=t.split(":"),n=i.length-1,a=i[n],a.indexOf(";")>-1&&(a=a.split(";"),r=0,e&&"number"==typeof e&&(r=parseFloat(a[1],10)/e),i[n]=parseInt(a[0],10)+r),n=i[0],{1:parseFloat(n,10),2:60*parseInt(n,10)+parseFloat(i[1],10),3:3600*parseInt(n,10)+60*parseInt(i[1],10)+parseFloat(i[2],10)}[i.length||1])}},v.p.cue=v.p.exec,v.protect={natives:function(t){return Object.keys?Object.keys(t):function(t){var e,n=[];for(e in t)s.call(t,e)&&n.push(e);return n}(t)}(v.p).map(function(t){return t.toLowerCase()})},v.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(t,e){var n=v.p[e];v.p[e]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+e+"', "+(null==t?"do not use.":"use '"+t+"' instead.")),v.p[e]=n),v.p[t].apply(this,[].slice.call(arguments))}}),t.Popcorn=v}else for(t.Popcorn={isSupported:!1},a="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);a.length;)t.Popcorn[a.shift()]=function(){}}(window,window.document),function(t){var e=function(e,n){return e=e||t.nop,n=n||t.nop,function(){e.apply(this,arguments),n.apply(this,arguments)}},n=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,a=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;t.player=function(n,a){if(!t[n]){a=a||{};var r=function(n,r,i){i=i||{};var o=new Date/1e3,s=o,d=0,u=0,c=1,l=!1,p={},f="string"==typeof n?t.dom.find(n):n,v={};Object.prototype.__defineGetter__||(v=f||document.createElement("div"));for(var h in f)h in v||("object"==typeof f[h]?v[h]=f[h]:"function"==typeof f[h]?v[h]=function(t){return"length"in f[t]&&!f[t].call?f[t]:function(){return f[t].apply(f,arguments)}}(h):t.player.defineProperty(v,h,{get:function(t){return function(){return f[t]}}(h),set:t.nop,configurable:!0}));var y=function(){o=new Date/1e3,v.paused||(v.currentTime+=o-s,v.dispatchEvent("timeupdate"),setTimeout(y,10)),s=o};return v.play=function(){this.paused=!1,v.readyState>=4&&(s=new Date/1e3,v.dispatchEvent("play"),y())},v.pause=function(){this.paused=!0,v.dispatchEvent("pause")},t.player.defineProperty(v,"currentTime",{get:function(){return d},set:function(t){return d=+t,v.dispatchEvent("timeupdate"),d},configurable:!0}),t.player.defineProperty(v,"volume",{get:function(){return c},set:function(t){return c=+t,v.dispatchEvent("volumechange"),c},configurable:!0}),t.player.defineProperty(v,"muted",{get:function(){return l},set:function(t){return l=+t,v.dispatchEvent("volumechange"),l},configurable:!0}),t.player.defineProperty(v,"readyState",{get:function(){return u},set:function(t){return u=t},configurable:!0}),v.addEventListener=function(t,e){return p[t]||(p[t]=[]),p[t].push(e),e},v.removeEventListener=function(t,e){var n,a=p[t];if(a){for(n=p[t].length-1;n>=0;n--)e===a[n]&&a.splice(n,1);return e}},v.dispatchEvent=function(e){var n,a=e.type;if(a||(a=e,(e=t.events.getInterface(a))&&(n=document.createEvent(e),n.initEvent(a,!0,!0,window,1))),p[a])for(e=p[a].length-1;e>=0;e--)p[a][e].call(this,n,this)},v.src=r||"",v.duration=0,v.paused=!0,v.ended=0,i&&i.events&&t.forEach(i.events,function(t,e){v.addEventListener(e,t,!1)}),a._canPlayType(f.nodeName,r)!==!1?a._setup?a._setup.call(v,i):(v.readyState=4,v.dispatchEvent("loadedmetadata"),v.dispatchEvent("loadeddata"),v.dispatchEvent("canplaythrough")):setTimeout(function(){v.dispatchEvent("error")},0),n=new t.p.init(v,i),a._teardown&&(n.destroy=e(n.destroy,function(){a._teardown.call(v,i)})),n};r.canPlayType=a._canPlayType=a._canPlayType||t.nop,t[n]=t.player.registry[n]=r}},t.player.registry={},t.player.defineProperty=Object.defineProperty||function(e,n,a){e.__defineGetter__(n,a.get||t.nop),e.__defineSetter__(n,a.set||t.nop)},t.player.playerQueue=function(){var t=[],e=!1;return{next:function(){e=!1,t.shift(),t[0]&&t[0]()},add:function(n){t.push(function(){e=!0,n&&n()}),!e&&t[0]()}}},t.smart=function(e,r,i){var o,s,d=["AUDIO","VIDEO"],u=t.dom.find(e);o=document.createElement("video");var c={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(u){if(d.indexOf(u.nodeName)>-1&&!r)return"object"==typeof r&&(i=r),t(u,i);for("string"==typeof r&&(r=[r]),e=0,srcLength=r.length;srcLength>e;e++){if(s=a.exec(r[e]),s=s&&s[1]?o.canPlayType(c[s[1]]):!1){r=r[e];break}for(var l in t.player.registry)if(t.player.registry.hasOwnProperty(l)&&t.player.registry[l].canPlayType(u.nodeName,r[e]))return t[l](u,r[e],i)}return-1===d.indexOf(u.nodeName)&&(o="string"==typeof r?r:r.length?r[0]:r,e=document.createElement(n.exec(o)?d[0]:d[1]),e.controls=!0,u.appendChild(e),u=e),i&&i.events&&i.events.error&&u.addEventListener("error",i.events.error,!1),u.src=r,t(u,i)}t.error("Specified target "+e+" was not found.")}}(Popcorn),function(t,e){t.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=!0;for(var t=0;onYouTubePlayerAPIReady.waiting.length>t;t++)onYouTubePlayerAPIReady.waiting[t]()},t.YT&&(t.quarantineYT=t.YT,t.YT=null),onYouTubePlayerAPIReady.waiting=[];var n=!1;e.player("youtube",{_canPlayType:function(t,e){return"string"==typeof e&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(e)&&"video"!==t.toLowerCase()},_setup:function(a){t.YT||n||(n=!0,e.getScript("//youtube.com/player_api"));var r=this,i=!1,o=document.createElement("div"),s=0,d=!0,u=!1,c=0,l=!1,p=100,f=e.player.playerQueue(),v=function(){e.player.defineProperty(r,"currentTime",{set:function(t){a.destroyed||(u=!0,s=Math.round(100*+t)/100)},get:function(){return s}}),e.player.defineProperty(r,"paused",{get:function(){return d}}),e.player.defineProperty(r,"muted",{set:function(t){return a.destroyed?t:(a.youtubeObject.isMuted()!==t&&(t?a.youtubeObject.mute():a.youtubeObject.unMute(),l=a.youtubeObject.isMuted(),r.dispatchEvent("volumechange")),a.youtubeObject.isMuted())},get:function(){return a.destroyed?0:a.youtubeObject.isMuted()}}),e.player.defineProperty(r,"volume",{set:function(t){return a.destroyed?t:(a.youtubeObject.getVolume()/100!==t&&(a.youtubeObject.setVolume(100*t),p=a.youtubeObject.getVolume(),r.dispatchEvent("volumechange")),a.youtubeObject.getVolume()/100)},get:function(){return a.destroyed?0:a.youtubeObject.getVolume()/100}}),r.play=function(){a.destroyed||(d=!1,f.add(function(){1!==a.youtubeObject.getPlayerState()?(u=!1,a.youtubeObject.playVideo()):f.next()}))},r.pause=function(){a.destroyed||(d=!0,f.add(function(){2!==a.youtubeObject.getPlayerState()?a.youtubeObject.pauseVideo():f.next()}))}};o.id=r.id+e.guid(),a._container=o,r.appendChild(o);var h=function(){var t,e,n,h,y=!0,m=function(){a.destroyed||(u?s===a.youtubeObject.getCurrentTime()?(u=!1,r.dispatchEvent("seeked"),r.dispatchEvent("timeupdate")):a.youtubeObject.seekTo(s):(s=a.youtubeObject.getCurrentTime(),r.dispatchEvent("timeupdate")),setTimeout(m,250))},g=function(t){var e=a.youtubeObject.getDuration();isNaN(e)||0===e?setTimeout(function(){g(2*t)},1e3*t):(r.duration=e,r.dispatchEvent("durationchange"),r.dispatchEvent("loadedmetadata"),r.dispatchEvent("loadeddata"),r.readyState=4,m(),r.dispatchEvent("canplaythrough"))};a.controls=0===+a.controls||1===+a.controls?a.controls:1,a.annotations=1===+a.annotations||3===+a.annotations?a.annotations:1,t=/^.*(?:\/|v=)(.{11})/.exec(r.src)[1],e=(r.src.split("?")[1]||"").replace(/v=.{11}/,""),e=e.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(t,e,n){return e|=0,n|=0,c=+n+60*e,""}),e=e.replace(/&start=(\d+)?/,function(t,e){return e|=0,c=e,""}),i=/autoplay=1/.test(e),e=e.split(/[\&\?]/g),n={wmode:"transparent"};for(var E=0;e.length>E;E++)h=e[E].split("="),n[h[0]]=h[1];a.youtubeObject=new YT.Player(o.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:n,videoId:t,events:{onReady:function(){p=r.volume,l=r.muted,b(),d=r.paused,v(),a.youtubeObject.playVideo(),r.currentTime=c},onStateChange:function(t){a.destroyed||-1===t.data||(2===t.data?(d=!0,r.dispatchEvent("pause"),f.next()):1!==t.data||y?0===t.data?r.dispatchEvent("ended"):1===t.data&&y&&(y=!1,(i||!r.paused)&&(d=!1),d&&a.youtubeObject.pauseVideo(),g(.025)):(d=!1,r.dispatchEvent("play"),r.dispatchEvent("playing"),f.next()))},onError:function(t){-1!==[2,100,101,150].indexOf(t.data)&&(r.error={customCode:t.data},r.dispatchEvent("error"))}}});var b=function(){a.destroyed||(l!==a.youtubeObject.isMuted()&&(l=a.youtubeObject.isMuted(),r.dispatchEvent("volumechange")),p!==a.youtubeObject.getVolume()&&(p=a.youtubeObject.getVolume(),r.dispatchEvent("volumechange")),setTimeout(b,250))}};onYouTubePlayerAPIReady.ready?h():onYouTubePlayerAPIReady.waiting.push(h)},_teardown:function(t){t.destroyed=!0;var e=t.youtubeObject;e&&(e.stopVideo(),e.clearVideo&&e.clearVideo()),this.removeChild(document.getElementById(t._container.id))}})}(window,Popcorn);